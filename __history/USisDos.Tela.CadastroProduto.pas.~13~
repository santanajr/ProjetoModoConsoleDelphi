unit USisDos.Tela.CadastroProduto;

interface

uses
  System.SysUtils,
  USisDos.Model.Produto,
  USisDos.Tela.ICadastroProduto;

Type
  TTelaCadastroProduto = class(TInterfacedObject, ICadastroProduto)
    private
      FProduto : TProduto;
      FOpcaoEscolhida : string;

      procedure SetProduto(ACodigo, ADescricao : string; AValor: Double);
    public
      constructor Create;
      destructor destroy;  override;
      function  MontarTelaCadastroProduto : ICadastroProduto;
      function  GetOpcaoEscolhida : string;
      function  GetProduto : TProduto;

      class function New : ICadastroProduto;
  end;

implementation

{ TTelaCadastroProduto }

constructor TTelaCadastroProduto.Create;
begin
  FProduto := TProduto.Create;
  SetProduto(EmptyStr, EmptyStr, 0);
end;

destructor TTelaCadastroProduto.destroy;
begin
  FProduto.Destroy;
end;

function TTelaCadastroProduto.GetOpcaoEscolhida: string;
begin
  result := FOpcaoEscolhida.ToUpper();
end;

function TTelaCadastroProduto.GetProduto: TProduto;
begin
  result := FProduto;
end;

function TTelaCadastroProduto.MontarTelaCadastroProduto : ICadastroProduto;
var
  LCodigo, LDescricao : string;
  LPreco : double;
begin
  Writeln('Digite o codigo do produto');
  ReadLn(LCodigo);
  Writeln('Digite a descrição do produto');
  ReadLn(LDescricao);
  Writeln('Digite o preço do produto');
  ReadLn(LPreco);
  SetProduto(LCodigo, LDescricao, LPreco);
  Writeln('Deseja continuar ? (S/N)');
  ReadLn(FOpcaoEscolhida);

  Result := Self;
end;

class function TTelaCadastroProduto.New: ICadastroProduto;
begin
  result := TTelaCadastroProduto.Create;
end;

procedure TTelaCadastroProduto.SetProduto(ACodigo, ADescricao: string; AValor: Double);
begin
  FProduto.FCodigo    := ACodigo;
  FProduto.FDescricao := ADescricao;
  FProduto.FPreco     := AValor;
end;

end.
